<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evidex</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baskervville:ital,wght@0,400..700;1,400..700&display=swap"
          rel="stylesheet">
    <!-- Pickr color picker -->
    <link href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/nano.min.css" rel="stylesheet"/>
</head>
<body>
    <div class="background-gradient">
        <!-- Dynamic orbs will be generated here by JavaScript -->
    </div>

    <div class="container">
        <header class="header">
            <h1 class="title">Evidex</h1>
        </header>

        <main id="main-root" class="main-content">
            <div class="glass-card cuts-panel" id="cuts-panel" style="display: none;">
                <div class="cuts-header">
                    <div class="cuts-title-wrap">
                        <h2 class="card-title">Cited Evidence</h2>
                    </div>
                </div>
                <div class="cuts-scroll" id="cuts-list">
                    <div class="cuts-empty">No selections yet. Add research papers and websites using the source panel</div>
                </div>
                <div class="cuts-footer">
                    <!-- Progress bar -->
                    <div class="evidence-progress-container" id="evidence-progress-bar" style="display: none;">
                        <div class="evidence-progress-text">
                            <span class="evidence-progress-label">Processing evidence...</span>
                            <span class="evidence-progress-count" id="evidence-progress-count">0 / 0</span>
                        </div>
                        <div class="evidence-progress-bar-track">
                            <div class="evidence-progress-fill" id="evidence-progress-fill"></div>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="secondary-button clear-button" id="clear-all-button"
                                title="Clear all evidence cards">
                            <span class="button-text">Clear</span>
                            <svg aria-label="Clear icon" class="button-icon" fill="none" height="20"
                                 role="img" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                 stroke-width="1.5" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg">
                                <title>Clear</title>
                                <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                            </svg>
                        </button>
                        <div class="dropdown-wrapper">
                            <button class="primary-button download-all" id="download-all-button">
                                <span class="button-text">Download</span>
                                <svg class="button-icon download-icon" fill="none" height="18" viewBox="0 0 24 24"
                                     width="18"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"
                                          stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                          stroke-width="2"/>
                                </svg>
                                <svg class="button-icon chevron-icon" fill="none" height="14" viewBox="0 0 24 24"
                                     width="14"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-linecap="round"
                                          stroke-linejoin="round"
                                          stroke-width="2"/>
                                </svg>
                            </button>
                            <div class="dropdown-menu" id="download-dropdown">
                                <button class="dropdown-item" id="copy-all-item">
                                    <svg class="dropdown-icon" fill="none" height="16" viewBox="0 0 24 24" width="16"
                                         xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8.5 3.5H19.5V14.5H8.5Z" stroke="currentColor" stroke-linecap="round"
                                              stroke-linejoin="round" stroke-width="1.5"/>
                                        <path d="M4.5 7.5H15.5V20.5H4.5Z" stroke="currentColor" stroke-linecap="round"
                                              stroke-linejoin="round" stroke-width="1.5"/>
                                    </svg>
                                    <span>Copy to Clipboard</span>
                                </button>
                                <button class="dropdown-item" data-format="docx">
                                    <svg class="dropdown-icon" fill="none" height="16" viewBox="0 0 24 24" width="16"
                                         xmlns="http://www.w3.org/2000/svg">
                                        <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"
                                              stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                              stroke-width="2"/>
                                        <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8" stroke="currentColor"
                                              stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                                    </svg>
                                    <span>Download as DOCX</span>
                                </button>
                                <button class="dropdown-item" data-format="pdf">
                                    <svg class="dropdown-icon" fill="none" height="16" viewBox="0 0 24 24" width="16"
                                         xmlns="http://www.w3.org/2000/svg">
                                        <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"
                                              stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                              stroke-width="2"/>
                                        <path d="M14 2v6h6" stroke="currentColor" stroke-linecap="round"
                                              stroke-linejoin="round" stroke-width="2"/>
                                    </svg>
                                    <span>Download as PDF</span>
                                </button>
                                <button class="dropdown-item" id="custom-order-btn">
                                    <svg class="dropdown-icon" fill="none" height="16" viewBox="0 0 24 24" width="16"
                                         xmlns="http://www.w3.org/2000/svg">
                                        <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-linecap="round"
                                              stroke-linejoin="round" stroke-width="2"/>
                                        <circle cx="7" cy="6" fill="currentColor" r="1"/>
                                        <circle cx="7" cy="12" fill="currentColor" r="1"/>
                                        <circle cx="7" cy="18" fill="currentColor" r="1"/>
                                    </svg>
                                    <span>Custom Order...</span>
                                </button>
                            </div>
                        </div>
                        <button class="whatsnew-inline" id="whatsnew-trigger" type="button">
                            <svg aria-hidden="true" class="whatsnew-icon" fill="none" height="16" viewBox="0 0 24 24"
                                 width="16" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M10.2 9.2a1.8 1.8 0 113.1 1.3c-.6.6-1.3.9-1.8 1.4-.4.4-.5.8-.5 1.3v.3"
                                      stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                      stroke-width="1.5"/>
                                <circle cx="12" cy="17" fill="currentColor" r="1"/>
                            </svg>
                            <span>What's New</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="glass-card input-card">
                <div class="card-header">
                    <h2 class="card-title">Source Panel</h2>
                </div>

                <div class="input-group">
                    <label for="url-input" class="input-label">Website URL</label>
                    <div class="input-wrapper">
                        <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <input
                                class="text-input"
                                id="url-input"
                                type="url"
                            placeholder=""
                            autocomplete="off"
                            required
                        />
                        <button class="import-icon-btn" id="import-icon-btn" title="Import sources from text"
                                type="button">
                            <svg fill="none" height="16" viewBox="0 0 24 24" width="16"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                      stroke-width="2"/>
                            </svg>
                        </button>
                        <div class="input-hint">Enter the URL of the article or document you want to analyze</div>
                    </div>
                </div>

                <!-- Collapsible area for initial launch: tagline + action button -->
                <div class="initial-extra" id="initial-extra" aria-hidden="true">
                    <div class="input-group">
                        <label for="claim-input" class="input-label">Claim / Tagline</label>
                        <div class="input-wrapper">
                            <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round" stroke-linecap="round"/>
                            </svg>
                            <input 
                                type="text"
                                id="claim-input" 
                                class="text-input" 
                                placeholder=""
                                autocomplete="off"
                                required
                            />
                            <div class="input-hint">Enter the claim or argument you want to find evidence for</div>
                        </div>
                    </div>

                    <button class="primary-button" id="cut-button">
                        <span class="button-text">Cite Evidence</span>
                        <svg class="button-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>


        </main>
    </div>

    <div class="toast" id="toast">
        <div class="toast-content">
            <svg class="toast-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 18a8 8 0 100-16 8 8 0 000 16z" stroke="currentColor" stroke-width="1.5"/>
                <path d="M6 10l2 2 6-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="toast-message"></span>
            <button class="toast-action" id="toast-action" style="display:none"></button>
        </div>
    </div>

    <!-- Onboarding Tutorial -->
    <div class="onboarding-overlay" id="onboarding-overlay">
        <div class="onboarding-container">
            <div class="onboarding-content" id="onboarding-content">
                <!-- Step indicator -->
                <div class="onboarding-progress">
                    <span class="progress-text" id="progress-text">Step 1 of 8</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>

                <!-- Tutorial content -->
                <div class="onboarding-step" id="step-content">
                    <h2 class="onboarding-title">Welcome to Evidex! ðŸŽ‰</h2>
                    <p class="onboarding-description">
                        Let's take a quick tour to help you extract and format research evidence from any webpage.
                    </p>
                </div>

                <!-- Navigation buttons -->
                <div class="onboarding-actions">
                    <button class="onboarding-btn secondary" id="skip-btn">Skip Tutorial</button>
                    <div class="nav-buttons">
                        <button class="onboarding-btn secondary" id="prev-btn" style="display: none;">Previous</button>
                        <button class="onboarding-btn primary" id="next-btn">Get Started</button>
                    </div>
                </div>
            </div>

            <!-- Spotlight border for focused elements -->
            <div class="spotlight-border" id="spotlight-border"></div>

            <!-- Tooltip for contextual help -->
            <div class="onboarding-tooltip" id="onboarding-tooltip">
                <div class="tooltip-arrow"></div>
                <div class="tooltip-content" id="tooltip-content"></div>
            </div>
        </div>
    </div>

    <!-- What's New Tutorial -->
    <div class="onboarding-overlay" id="whatsnew-overlay">
        <div class="onboarding-container">
            <div class="onboarding-content" id="whatsnew-content">
                <div class="onboarding-progress">
                    <span class="progress-text" id="whatsnew-progress-text">Step 1 of 5</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="whatsnew-progress-fill"></div>
                    </div>
                </div>

                <div class="onboarding-step" id="whatsnew-step-content">
                    <h2 class="onboarding-title">What's New in Evidex</h2>
                    <p class="onboarding-description">
                        Explore our latest improvements for orchestrating large evidence sets.
                    </p>
                </div>

                <div class="onboarding-actions">
                    <button class="onboarding-btn secondary" id="whatsnew-skip-btn">Dismiss</button>
                    <div class="nav-buttons">
                        <button class="onboarding-btn secondary" id="whatsnew-prev-btn" style="display: none;">Back
                        </button>
                        <button class="onboarding-btn primary" id="whatsnew-next-btn">Show Me</button>
                    </div>
                </div>
            </div>

            <div class="spotlight-border" id="whatsnew-spotlight"></div>

            <div class="onboarding-tooltip" id="whatsnew-tooltip">
                <div class="tooltip-arrow"></div>
                <div class="tooltip-content" id="whatsnew-tooltip-content"></div>
            </div>
        </div>
    </div>

    <!-- Custom Order Modal -->
    <div class="modal-overlay" id="custom-order-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title">Custom Download Order</h2>
                <button aria-label="Close modal" class="modal-close" id="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label class="modal-label" for="tagline-order-input">Tagline Order</label>
                    <div class="input-wrapper">
                        <div class="input-validation-overlay" id="validation-overlay"></div>
                        <textarea
                                class="modal-textarea"
                                id="tagline-order-input"
                                placeholder="Enter taglines separated by commas..."
                                rows="4"
                        ></textarea>
                    </div>
                    <div class="available-taglines">
                        <span class="available-label">Click to add:</span>
                        <div class="tagline-chips" id="available-taglines-list"></div>
                    </div>
                </div>
                <div class="format-selector">
                    <label class="modal-label">Download Format</label>
                    <div class="format-buttons">
                        <button class="format-btn active" data-format="docx">
                            <svg fill="none" height="16" viewBox="0 0 24 24" width="16"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"
                                      stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                      stroke-width="2"/>
                                <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8" stroke="currentColor"
                                      stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                            </svg>
                            DOCX
                        </button>
                        <button class="format-btn" data-format="pdf">
                            <svg fill="none" height="16" viewBox="0 0 24 24" width="16"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"
                                      stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                      stroke-width="2"/>
                                <path d="M14 2v6h6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                      stroke-width="2"/>
                            </svg>
                            PDF
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="tutorial-trigger" id="restart-tutorial-btn" title="Restart tutorial">
                    <svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm0 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"
                              fill="currentColor"/>
                        <path d="M12 6v6l4 2" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                              stroke-width="2"/>
                    </svg>
                    Tutorial
                </button>
                <button class="secondary-button" id="cancel-order-btn">Cancel</button>
                <button class="primary-button" id="download-order-btn">Download</button>
            </div>
        </div>
    </div>

    <!-- Import Source Modal -->
    <div class="modal-overlay" id="import-source-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title">Import Sources</h2>
                <button aria-label="Close modal" class="modal-close" id="close-import-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label class="modal-label" for="import-source-input">Paste Content</label>
                    <div class="input-wrapper">
                        <textarea
                                class="modal-textarea"
                                id="import-source-input"
                                placeholder="Paste text with evidence and citations, JSON format {&quot;tagline&quot;: &quot;...&quot;, &quot;link&quot;: &quot;...&quot;}, or AI response. We'll automatically extract evidence."
                                rows="8"
                        ></textarea>
                    </div>
                </div>

                <!-- Import Progress Indicator -->
                <div class="import-progress-indicator" id="import-progress-indicator" style="display: none;">
                    <div class="processing-content">
                        <div class="processing-spinner"></div>
                        <div class="processing-text">
                            <span class="processing-message" id="import-processing-message">Processing sources...</span>
                            <span class="processing-count" id="import-processing-count">0 / 0</span>
                        </div>
                    </div>
                    <div class="processing-bar">
                        <div class="processing-bar-fill" id="import-processing-bar-fill" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="secondary-button" id="cancel-import-btn">Cancel</button>
                <button class="primary-button" id="import-submit-button">Import</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/pickr.min.js"></script>
    <!-- Load application modules -->
    <script src="js/main.js" type="module"></script>
</body>
</html>





